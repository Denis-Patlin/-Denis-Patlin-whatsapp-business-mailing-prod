(self["webpackChunkwork_project_v3"]=self["webpackChunkwork_project_v3"]||[]).push([[449],{5067:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(4562),s=n(4145),i=n(9930),a=n(4324),o=n(1713),l=n(3687),u=n(1783),c=n(7953),h=function(){var t=this,e=t._self._c;return e(o.Z,{attrs:{justify:"center"}},[e(i.Z,{attrs:{fullscreen:t.fullscreen,width:t.width,transition:t.fullscreen?"dialog-bottom-transition":"dialog-transition"},on:{"click:outside":t.closeModal},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e(s.Z,[e(u.Z,{staticClass:"toolbar",attrs:{dense:"",flat:"",color:"primary"}},[e(c.qW,[t._v(" "+t._s(t.title)+" ")]),e(l.Z),e(r.Z,{attrs:{icon:""},on:{click:t.closeModal}},[e(a.Z,[t._v("mdi-close")])],1)],1),t._t("content")],2)],1)],1)},d=[],f={props:{open:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:void 0}},methods:{closeModal(){this.$emit("onModalClose",!1)}}},m=f,p=n(1001),_=(0,p.Z)(m,h,d,!1,null,"7900aa29",null),v=_.exports},1149:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(7808),s=function(){var t=this,e=t._self._c;return e(r.Z,{attrs:{"prepend-icon":"fa-solid fa-magnifying-glass",placeholder:"Search..."},on:{input:t.search}})},i=[],a={props:{dataForFilter:{type:Array,default:()=>[]},searchKey:{type:String,default:""}},data(){return{filtredData:[]}},methods:{search(t){this.filtredData=this.dataForFilter.filter((e=>e[this.searchKey].includes(t))),this.$emit("onFilter",this.filtredData)}}},o=a,l=n(1001),u=(0,l.Z)(o,s,i,!1,null,null,null),c=u.exports},6449:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D}});var r=n(3423),s=n(5808),i=n(4525),a=n(6098),o=n(5256),l=(n(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"center"},[e("div",{staticClass:"button__inner"},[e("button-vue",{staticClass:"button",attrs:{color:"white"},on:{click:function(e){return t.$router.push("/new-template")}}},[t._v(" Создать ")])],1),e("div",{staticClass:"container"},[e("div",{staticClass:"wrapper"},[t.templatesOrigin.length?t._e():e("div",{staticClass:"empty_list"},[t._v(" Список пуст ")]),e("div",{staticClass:"search-bar"},[e("BaseSearchBar",{attrs:{"data-for-filter":t.templates,"search-key":"template_name"},on:{onFilter:t.onFilterHandle}})],1),e(o.Z,{attrs:{items:t.templatesOrigin,"item-height":70,"min-height":"50vh","max-height":"100vh"},scopedSlots:t._u([{key:"default",fn:function({item:n}){return[e("div",{staticClass:"list_item"},[e("div",{staticClass:"list_item__block_info"},[e(r.Z,{attrs:{color:t.getColor(n.template_name)}},[e("div",[t._v(t._s(t.getFirstLetter(n.template_name)))])]),e("button",{staticClass:"block_info__name",on:{click:function(e){return t.openModal(n)}}},[t._v(" "+t._s(n.template_name)+" ")])],1),e("div",{staticClass:"list_item__additional"},[e("span",[t._v(t._s(t.dayjs(n.created_at).format("DD.MM.YYYY hh:mm:ss")))]),e("pre",[t._v(t._s(n.status))])])])]}}])}),e("BaseModal",{attrs:{open:t.open,title:"Детали шаблона"},on:{onModalClose:t.onCloseModalHandle}},[e("template",{slot:"content"},[e(s.Z,{attrs:{dense:""}},[e(i.Z,[e(a.V9,[t._v("ID Шаблона:")]),e(a.oZ,[t._v(t._s(t.selectedItem.template_id))])],1),e(i.Z,[e(a.V9,[t._v("ID Пользователя:")]),e(a.oZ,[t._v(t._s(t.selectedItem.user_id||"Не найдено"))])],1),e(i.Z,[e(a.V9,[t._v("Время создания")]),e(a.oZ,[t._v(t._s(t.dayjs(t.selectedItem.timestamp).format("DD.MM.YYYY hh:mm:ss")))])],1),e(i.Z,[e(a.V9,[t._v("Контент")]),"TEXT"===t.selectedItem.edna_shortcut?.content?.whatsappContent?.contentType?e("p",{key:"content-availability",staticStyle:{width:"100%"}},[t._v(' "'+t._s(t.selectedItem.edna_shortcut?.content?.whatsappContent?.text)+'" ')]):e("a",{key:"content-availability",staticClass:"content_file",attrs:{href:t.selectedItem.edna_shortcut?.content?.whatsappContent?.attachment?.url,target:"_blank"}},[t._v(" "+t._s(t.selectedItem.edna_shortcut?.content?.whatsappContent?.attachment?.url)+" ")])],1)],1)],1)],2),e("vue-element-loading",{attrs:{active:t.isLoading,"background-color":"rgba(255, 255, 255, 1)",color:"blue"}})],1)])])}),u=[],c=n(4110),h=n(629),d=n(1149),f=n(5067),m=n(7978),p=n(4402),_=n(7484),v=n.n(_),g=n(2581),$={components:{BaseModal:f.Z,BaseSearchBar:d.Z,ButtonVue:m.Z},mixins:[c.Z,g.Z],data:()=>({isLoading:!1,open:!1,selectedItem:{},templatesOrigin:[]}),computed:{...(0,h.Se)(["getTemplates"]),templates(){return this.getTemplates}},watch:{templates(t){this.templatesOrigin=[...t]}},mounted(){if(!localStorage.getItem("CompleteTemplateCreateTour")){this.createTour();const t=this.$route.params.userId;t?this.addAdminCreateTemplateTour():this.addCreateTemplateTour(),this.tour.start()}},created(){this.getData()},methods:{getData(t=this.$route.params.userId){this.isLoading=!1;const e={};t&&(e.username=t),p.t.get("get/messages/matcher").then((t=>{const e=t.data,n=e.sort(((t,e)=>new Date(e.date)-new Date(t.date)));this.$store.commit("setTemplate",n.reverse())})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})})).finally((()=>{this.isLoading=!1}))},dayjs:v(),onCloseModalHandle(){this.selectedItem={},this.open=!1},onFilterHandle(t){this.templatesOrigin=t},openModal(t){this.selectedItem=t,this.open=!0},deleteTemplate(t){p.t["delete"](`delete/template/${t.template_id}`).then((()=>{this.$store.commit("deleteTemplate",t.template_id),this.$toast.info("Шаблон успешно удален")})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})}))}}},y=$,M=n(1001),S=(0,M.Z)(y,l,u,!1,null,"f002338c",null),D=S.exports},7484:function(t){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",s="second",i="minute",a="hour",o="day",l="week",u="month",c="quarter",h="year",d="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(s,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),s=e.clone().add(r,u),i=n-s<0,a=e.clone().add(r+(i?-1:1),u);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:h,w:l,d:o,D:d,h:a,m:i,s:s,ms:r,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$="en",y={};y[$]=_;var M=function(t){return t instanceof b},S=function t(e,n,r){var s;if(!e)return $;if("string"==typeof e){var i=e.toLowerCase();y[i]&&(s=i),n&&(y[i]=n,s=i);var a=e.split("-");if(!s&&a.length>1)return t(a[0])}else{var o=e.name;y[o]=e,s=o}return!r&&s&&($=s),s||!r&&$},D=function(t,e){if(M(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new b(n)},C=g;C.l=S,C.i=M,C.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function _(t){this.$L=S(t.locale,null,!0),this.parse(t)}var v=_.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(C.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(m);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(t,e){var n=D(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return D(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<D(t)},v.$g=function(t,e,n){return C.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,r=!!C.u(e)||e,c=C.p(t),f=function(t,e){var s=C.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?s:s.endOf(o)},m=function(t,e){return C.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,_=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case h:return r?f(1,0):f(31,11);case u:return r?f(1,_):f(0,_+1);case l:var $=this.$locale().weekStart||0,y=(p<$?p+7:p)-$;return f(r?v-y:v+(6-y),_);case o:case d:return m(g+"Hours",0);case a:return m(g+"Minutes",1);case i:return m(g+"Seconds",2);case s:return m(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,l=C.p(t),c="set"+(this.$u?"UTC":""),f=(n={},n[o]=c+"Date",n[d]=c+"Date",n[u]=c+"Month",n[h]=c+"FullYear",n[a]=c+"Hours",n[i]=c+"Minutes",n[s]=c+"Seconds",n[r]=c+"Milliseconds",n)[l],m=l===o?this.$D+(e-this.$W):e;if(l===u||l===h){var p=this.clone().set(d,1);p.$d[f](m),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[C.p(t)]()},v.add=function(r,c){var d,f=this;r=Number(r);var m=C.p(c),p=function(t){var e=D(f);return C.w(e.date(e.date()+Math.round(t*r)),f)};if(m===u)return this.set(u,this.$M+r);if(m===h)return this.set(h,this.$y+r);if(m===o)return p(1);if(m===l)return p(7);var _=(d={},d[i]=e,d[a]=n,d[s]=t,d)[m]||1,v=this.$d.getTime()+r*_;return C.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",s=C.z(this),i=this.$H,a=this.$m,o=this.$M,l=n.weekdays,u=n.months,c=n.meridiem,h=function(t,n,s,i){return t&&(t[n]||t(e,r))||s[n].slice(0,i)},d=function(t){return C.s(i%12||12,t,"0")},m=c||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,(function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return C.s(e.$y,4,"0");case"M":return o+1;case"MM":return C.s(o+1,2,"0");case"MMM":return h(n.monthsShort,o,u,3);case"MMMM":return h(u,o);case"D":return e.$D;case"DD":return C.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,l,2);case"ddd":return h(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return m(i,a,!0);case"A":return m(i,a,!1);case"m":return String(a);case"mm":return C.s(a,2,"0");case"s":return String(e.$s);case"ss":return C.s(e.$s,2,"0");case"SSS":return C.s(e.$ms,3,"0");case"Z":return s}return null}(t)||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,f){var m,p=this,_=C.p(d),v=D(r),g=(v.utcOffset()-this.utcOffset())*e,$=this-v,y=function(){return C.m(p,v)};switch(_){case h:m=y()/12;break;case u:m=y();break;case c:m=y()/3;break;case l:m=($-g)/6048e5;break;case o:m=($-g)/864e5;break;case a:m=$/n;break;case i:m=$/e;break;case s:m=$/t;break;default:m=$}return f?m:C.a(m)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return y[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},_}(),w=b.prototype;return D.prototype=w,[["$ms",r],["$s",s],["$m",i],["$H",a],["$W",o],["$M",u],["$y",h],["$D",d]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),D.extend=function(t,e){return t.$i||(t(e,b,D),t.$i=!0),D},D.locale=S,D.isDayjs=M,D.unix=function(t){return D(1e3*t)},D.en=y[$],D.Ls=y,D.p={},D}))},5256:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(8846);function s(t,e,n){const{self:r=!1}=e.modifiers||{},s=e.value,i="object"===typeof s&&s.options||{passive:!0},a="function"===typeof s||"handleEvent"in s?s:s.handler,o=r?t:e.arg?document.querySelector(e.arg):window;o&&(o.addEventListener("scroll",a,i),t._onScroll=Object(t._onScroll),t._onScroll[n.context._uid]={handler:a,options:i,target:r?void 0:o})}function i(t,e,n){var r;if(!(null===(r=t._onScroll)||void 0===r?void 0:r[n.context._uid]))return;const{handler:s,options:i,target:a=t}=t._onScroll[n.context._uid];a.removeEventListener("scroll",s,i),delete t._onScroll[n.context._uid]}const a={inserted:s,unbind:i};var o=a,l=n(5352),u=r.Z.extend({name:"v-virtual-scroll",directives:{Scroll:o},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},data:()=>({first:0,last:0,scrollTop:0}),computed:{__bench(){return parseInt(this.bench,10)},__itemHeight(){return parseInt(this.itemHeight,10)},firstToRender(){return Math.max(0,this.first-this.__bench)},lastToRender(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted(){this.last=this.getLast(0)},methods:{getChildren(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild(t,e){e+=this.firstToRender;const n=(0,l.kb)(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:n},key:e},(0,l.z9)(this,"default",{index:e,item:t}))},getFirst(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast(t){const e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render(t){const e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:(0,l.kb)(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}})},2581:function(t,e){"use strict";e["Z"]={methods:{getColor(t){const e=["#F46A5F","#FC8256","#FFC33D","#49BEB7","#4C96D7","#8555D7","#FF7DCC","#D4C5F9","#4992E6","#FF6B8A","#01A9DB","#B6FCD5"];let n=0;for(let s=0;s<t.length;s++)n=t.charCodeAt(s)+((n<<5)-n);const r=Math.abs(n)%e.length;return e[r]},getFirstLetter(t){return t&&t.length>0?t.charAt(0):""}}}}}]);
//# sourceMappingURL=449.258afeb2.js.map