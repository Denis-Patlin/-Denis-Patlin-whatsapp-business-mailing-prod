"use strict";(self["webpackChunkwork_project_v3"]=self["webpackChunkwork_project_v3"]||[]).push([[265,951,586],{7978:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("button",t._g({staticClass:"button",class:[t.colors[t.color]],attrs:{active:t.active}},t.$listeners),[t._t("default")],2)},i=[],r={props:{active:{type:Boolean,default:!1},color:{type:String,default:"transparent"}},data(){return{colors:{transparent:"button__transparent",white:"button__white",gray:"button__gray"}}}},o=r,n=s(1001),l=(0,n.Z)(o,a,i,!1,null,"70d46d69",null),c=l.exports},1149:function(t,e,s){s.d(e,{Z:function(){return h}});var a=s(7808),i=function(){var t=this,e=t._self._c;return e(a.Z,{attrs:{"prepend-icon":"fa-solid fa-magnifying-glass",placeholder:"Search..."},on:{input:t.search}})},r=[],o={props:{dataForFilter:{type:Array,default:()=>[]},searchKey:{type:String,default:""}},data(){return{filtredData:[]}},methods:{search(t){this.filtredData=this.dataForFilter.filter((e=>e[this.searchKey].includes(t))),this.$emit("onFilter",this.filtredData)}}},n=o,l=s(1001),c=(0,l.Z)(n,i,r,!1,null,null,null),h=c.exports},5829:function(t,e,s){s.r(e),s.d(e,{default:function(){return Z}});var a=s(3423),i=s(4562),r=s(9223),o=s(4324),n=s(5256),l=(s(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"center"},[e("div",{staticClass:"button__inner"},[e("button-vue",{staticClass:"button",attrs:{color:"white"},on:{click:function(e){return t.$router.push("/new-template")}}},[t._v(" Создать ")])],1),e("div",{staticClass:"container"},[e("div",{staticClass:"wrapper"},[t.templatesOrigin.length?t._e():e("div",{staticClass:"empty_list"},[t._v(" Список пуст ")]),e("div",{staticClass:"search-bar"},[e("BaseSearchBar",{attrs:{"data-for-filter":t.templates,"search-key":"template_name"},on:{onFilter:t.onFilterHandle}})],1),e(n.Z,{attrs:{items:t.templatesOrigin,"item-height":70,height:"800px"},scopedSlots:t._u([{key:"default",fn:function({item:s}){return[e("div",{staticClass:"list_item"},[e("div",{staticClass:"list_item__block_info"},[e(a.Z,{attrs:{color:t.getColor(s.template_name)}},[e("div",[t._v(t._s(t.getFirstLetter(s.template_name)))])]),e("button",{staticClass:"block_info__name",on:{click:function(e){return t.openModal(s)}}},[t._v(" "+t._s(s.template_name)+" ")])],1),e("div",{staticClass:"list_item__additional d-flex"},[e("div",{staticClass:"list_item__info"},[e("span",{staticClass:"list_item__time"},[t._v(t._s(t.dayjs(s.created_at).format("DD.MM.YYYY hh:mm:ss")))]),e("pre",[t._v(t._s(s.status))])]),e("div",[e(i.Z,{attrs:{elevation:"2",icon:"",plain:""},on:{click:function(e){return t.deleteTemplate(s)}}},[e(o.Z,{attrs:{color:"red"}},[t._v(" mdi-trash-can ")])],1)],1)])])]}}])}),e("BaseModal",{attrs:{open:t.open,title:"Детали шаблона"},on:{onModalClose:t.onCloseModalHandle}},[e("template",{slot:"content"},[e("div",{staticClass:"pa-5"},[e("div",[e("h3",[t._v("Данные шаблона")]),e("div",[e("div",[e("span",[t._v("Тип шаблона:")]),e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.type))])]),e("div",[e("span",[t._v("Название шаблона:")]),e("span",[t._v(t._s(t.selectedItem?.template_name))])]),e("div",[e("span",[t._v("Категория шаблона:")]),e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.category))])]),e("div",[e("span",[t._v("Язык шаблона:")]),e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.language))])])])]),e(r.Z),e("div",[e("h3",[t._v("Заголовок")]),"TEXT"===t.selectedItem?.edna_shortcut?.messageMatcher?.content?.header?.headerType?e("div",[e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.content?.header?.headerType)+":")]),e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.content?.header?.text))])]):t._e()]),e(r.Z),e("div",[e("h3",[t._v("Текст шаблона")]),e("div",[e("p",[t._v("Текст и порядок строк символов в шаблоне регистрируются у оператора как пример исходящего сообщения. Подставляйте конкретные переменные или необходимый текст вместо строк символов в пользовательском шаблоне и используйте его для рассылок вашим клиентам.")])]),e("span",[t._v(t._s(t.selectedItem?.edna_shortcut?.messageMatcher?.content?.header?.text))])]),e(r.Z),e("div",{staticClass:"mt-4"},[e("span",[t._v("Время создания:")]),e("span",[t._v(t._s(t.dayjs(t.selectedItem.timestamp).format("DD.MM.YYYY hh:mm:ss")))])])],1)])],2),e("vue-element-loading",{attrs:{active:t.isLoading,"background-color":"rgba(255, 255, 255, 1)",color:"blue"}})],1)])])}),c=[],h=s(4110),d=s(629),u=s(1149),v=s(5067),m=s(7978),p=s(4402),_=s(7484),g=s.n(_),b=s(2581),f={components:{BaseModal:v.Z,BaseSearchBar:u.Z,ButtonVue:m.Z},mixins:[h.Z,b.Z],data:()=>({isLoading:!1,open:!1,selectedItem:{},templatesOrigin:[]}),computed:{...(0,d.Se)(["getTemplates"]),templates(){return this.getTemplates}},watch:{templates(t){this.templatesOrigin=[...t]}},created(){this.getData()},methods:{getData(t=this.$route.params.userId){this.isLoading=!1;const e={};t&&(e.username=t),p.t.get("get/messages/matcher").then((t=>{const e=t.data,s=e.sort(((t,e)=>new Date(e.date)-new Date(t.date)));this.$store.commit("setTemplate",s.reverse())})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})})).finally((()=>{this.isLoading=!1}))},dayjs:g(),onCloseModalHandle(){this.selectedItem={},this.open=!1},onFilterHandle(t){this.templatesOrigin=t},openModal(t){this.selectedItem=t,this.open=!0},deleteTemplate(t){p.t["delete"](`get/messages/matcher/${t.edna_template_id}`).then((()=>{this.$toast.info("Шаблон успешно удален"),this.templatesOrigin=this.templatesOrigin.filter((e=>e.edna_template_id!==t.edna_template_id))})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})}))}}},C=f,D=s(1001),y=(0,D.Z)(C,l,c,!1,null,"81ae5c30",null),Z=y.exports},3604:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"dashboard__header"},[e("div",{staticClass:"dashboard__title"},[t._v(" "+t._s(t.activeDashboardTitle)+" ")]),e("div",{staticClass:"dashboard__control"},[e("dashboard-control")],1)]),e("section",{staticClass:"dashboard__section"},[e("vue-element-loading",{attrs:{active:t.isLoading,"background-color":"rgba(255, 255, 255, .2)",color:"blue"}}),e("router-view"),e("keep-alive",[t.activeNestedDashboard?t._e():e(t.activeComponent,{tag:"component",staticClass:"animate__animated animate__fadeIn"})],1)],1)])},i=[],r=s(7978),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("BaseButton",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{color:"white",active:"create"===t.activeDashboardCategory},on:{click:function(e){return t.switchDashboardCategory("create")}}},[t._v(" Создать ")]),e("BaseButton",{attrs:{color:"white",active:"list"===t.activeDashboardCategory},on:{click:function(e){return t.switchDashboardCategory("list")}}},[t._v(" Список ")])],1)},n=[],l=(s(7658),s(629)),c={components:{BaseButton:r.Z},data(){return{activeButton:"create"}},computed:{...(0,l.Se)(["getActiveDashboard","getActiveDashboardCategory"]),activeDashboard(){return this.getActiveDashboard},activeDashboardCategory(){return this.getActiveDashboardCategory},showButton(){return"reports"!==this.getActiveDashboard}},methods:{switchDashboardCategory(t){this.$router.push({name:this.activeDashboard}),this.$store.commit("setActiveDashboardCategory",t),this.$store.commit("setActiveNestedDashboard","")}}},h=c,d=s(1001),u=(0,d.Z)(h,o,n,!1,null,"4e8dbe64",null),v=u.exports,m=s(2467),p={components:{ButtonVue:r.Z,DashboardControl:v},mixins:[m.Z],data(){return{isLoading:!1}},watch:{activeDashboard(){"reports"===this.activeDashboard&&this.$store.commit("setActiveDashboardCategory","list"),this.setActiveComponent()},activeDashboardCategory(){this.setActiveComponent()}},created(){this.setActiveComponent()}},_=p,g=(0,d.Z)(_,a,i,!1,null,"4a68ea76",null),b=g.exports},3423:function(t,e,s){s.d(e,{Z:function(){return l}});var a=s(6878),i=s(8846),r=s(2637),o=s(5352),n=s(7678),l=(0,n.Z)(a.Z,i.Z,r.Z).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes(){return{"v-avatar--left":this.left,"v-avatar--right":this.right,...this.roundedClasses}},styles(){return{height:(0,o.kb)(this.size),minWidth:(0,o.kb)(this.size),width:(0,o.kb)(this.size),...this.measurableStyles}}},render(t){const e={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),this.$slots.default)}})},9223:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(6669),i=a.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},5256:function(t,e,s){s.d(e,{Z:function(){return c}});var a=s(8846);function i(t,e,s){const{self:a=!1}=e.modifiers||{},i=e.value,r="object"===typeof i&&i.options||{passive:!0},o="function"===typeof i||"handleEvent"in i?i:i.handler,n=a?t:e.arg?document.querySelector(e.arg):window;n&&(n.addEventListener("scroll",o,r),t._onScroll=Object(t._onScroll),t._onScroll[s.context._uid]={handler:o,options:r,target:a?void 0:n})}function r(t,e,s){var a;if(!(null===(a=t._onScroll)||void 0===a?void 0:a[s.context._uid]))return;const{handler:i,options:r,target:o=t}=t._onScroll[s.context._uid];o.removeEventListener("scroll",i,r),delete t._onScroll[s.context._uid]}const o={inserted:i,unbind:r};var n=o,l=s(5352),c=a.Z.extend({name:"v-virtual-scroll",directives:{Scroll:n},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},data:()=>({first:0,last:0,scrollTop:0}),computed:{__bench(){return parseInt(this.bench,10)},__itemHeight(){return parseInt(this.itemHeight,10)},firstToRender(){return Math.max(0,this.first-this.__bench)},lastToRender(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted(){this.last=this.getLast(0)},methods:{getChildren(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild(t,e){e+=this.firstToRender;const s=(0,l.kb)(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:s},key:e},(0,l.z9)(this,"default",{index:e,item:t}))},getFirst(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast(t){const e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render(t){const e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:(0,l.kb)(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}})},2581:function(t,e){e["Z"]={methods:{getColor(t){const e=["#F46A5F","#FC8256","#FFC33D","#49BEB7","#4C96D7","#8555D7","#FF7DCC","#D4C5F9","#4992E6","#FF6B8A","#01A9DB","#B6FCD5"];let s=0;for(let i=0;i<t.length;i++)s=t.charCodeAt(i)+((s<<5)-s);const a=Math.abs(s)%e.length;return e[a]},getFirstLetter(t){return t&&t.length>0?t.charAt(0):""}}}},2467:function(t,e,s){var a=s(629);e["Z"]={data(){return{activeComponent:null,activeDashboardTitle:"",componentsImports:{templates:{create:()=>Promise.all([s.e(941),s.e(36),s.e(877),s.e(138),s.e(823)]).then(s.bind(s,1003)),list:()=>Promise.all([s.e(941),s.e(36),s.e(877),s.e(173),s.e(152),s.e(586)]).then(s.bind(s,5829))},reports:{list:()=>Promise.all([s.e(941),s.e(877),s.e(173),s.e(152),s.e(325)]).then(s.bind(s,1009))},clients:{create:()=>Promise.all([s.e(941),s.e(36),s.e(877),s.e(362)]).then(s.bind(s,2362)),list:()=>Promise.all([s.e(941),s.e(36),s.e(313)]).then(s.bind(s,1313)),clientsTemplates:{create:()=>Promise.all([s.e(941),s.e(36),s.e(877),s.e(138),s.e(823)]).then(s.bind(s,1003)),list:()=>Promise.all([s.e(941),s.e(36),s.e(877),s.e(173),s.e(152),s.e(586)]).then(s.bind(s,5829))}}},componentsTitles:{templates:{create:"Создание шаблона",list:"Список шаблонов"},reports:{create:"Создание отчета",list:"Список отчетов"},clients:{create:"Создание клиента",list:"Список клиентов",clientsTemplates:{create:`Создание шаблона ${this.$route.params.userId}`,list:`Список шаблонов ${this.$route.params.userId}`}}}}},computed:{...(0,a.Se)(["getActiveDashboard","getActiveDashboardCategory","getActiveNestedDashboard","getActiveNestedDashboardCategory"]),activeDashboard(){return this.getActiveDashboard},activeDashboardCategory(){return this.getActiveDashboardCategory},activeNestedDashboard(){return this.getActiveNestedDashboard},activeNestedDashboardCategory(){return this.getActiveNestedDashboardCategory}},methods:{setActiveComponent(t=!1){if(!this.activeDashboard)return;this.isLoading=!0;let e=null;e=t?this.componentsImports[this.activeDashboard][this.activeNestedDashboard][this.activeNestedDashboardCategory]:this.componentsImports[this.activeDashboard][this.activeDashboardCategory],e().then((e=>{this.activeComponent=e.default||e,this.isLoading=!1,this.setActiveComponentTitle(t)}))},setActiveComponentTitle(t=!1){this.activeDashboardTitle=t?this.componentsTitles[this.activeDashboard][this.activeNestedDashboard][this.activeNestedDashboardCategory]:this.componentsTitles[this.activeDashboard][this.activeDashboardCategory]}}}}}]);
//# sourceMappingURL=templatesList.10a82e33.js.map