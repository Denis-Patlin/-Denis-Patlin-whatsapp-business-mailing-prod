"use strict";(self["webpackChunkwork_project_v3"]=self["webpackChunkwork_project_v3"]||[]).push([[112],{1112:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var s=i(4562),a=i(266),l=i(2118),n=(i(7658),i(1280)),o=n.Z,r=i(7678),h=i(7394),u=i(2240),c=i(6878),p=i(3037),d=i(6669),m=i(1444),v=i(8860),g=i(4338),f=i(4101),y=(0,r.Z)(c.Z,g.Z,v.Z,d.Z,(0,p.d)("chipGroup"),(0,m.d)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:()=>({proxyClass:"v-chip--active"}),computed:{classes(){return{"v-chip":!0,...v.Z.options.computed.classes.call(this),"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose,...this.themeClasses,...this.sizeableClasses,...this.groupClasses}},hasClose(){return Boolean(this.close)},isClickable(){return Boolean(v.Z.options.computed.isClickable.call(this)||this.chipGroup)}},created(){const t=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];t.forEach((([t,e])=>{this.$attrs.hasOwnProperty(t)&&(0,f.fK)(t,e,this)}))},methods:{click(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter(){const t=[];return this.isActive&&t.push(this.$createElement(u.Z,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(h.Zq,t)},genClose(){return this.$createElement(u.Z,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:t=>{t.stopPropagation(),t.preventDefault(),this.$emit("click:close"),this.$emit("update:active",!1)}}},this.closeIcon)},genContent(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render(t){const e=[this.genContent()];let{tag:i,data:s}=this.generateRouteLink();s.attrs={...s.attrs,draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:s.attrs.tabindex},s.directives.push({name:"show",value:this.active}),s=this.setBackgroundColor(this.color,s);const a=this.textColor||this.outlined&&this.color;return t(i,this.setTextColor(a,s),e)}}),b=i(5352),C=i(1767),w=o.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,b.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...o.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,b.XE)(e,1024===this.base))},internalArrayValue(){return(0,b.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:i=0}=t,s=this.truncateText(e);return this.showSize?`${s} (${(0,b.XE)(i,1024===this.base)})`:s})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,f.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,b.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(y,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=o.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,C.y0)(t.data.style,{display:"none"})),t},genInput(){const t=o.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,i)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[i],file:e,index:i}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=o.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}}),$=i(5125),S=i(1713),x=(i(7393),i(596)),k=i(573),V=i(4802),Z=i(3305),I=x.Z.extend({name:"v-switch",directives:{Touch:V.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...k.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(h.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(Z.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===b.Do.left&&this.isActive||t.keyCode===b.Do.right&&!this.isActive)&&this.onChange()}}});const _=(0,r.Z)(n.Z);var z=_.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...n.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=n.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){n.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e($.Z,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e(l.Z,[e(S.Z,[e(a.Z,{attrs:{cols:"12"}},[e(n.Z,{attrs:{label:"Название",rules:t.generalRules,required:""},model:{value:t.template.name,callback:function(e){t.$set(t.template,"name",e)},expression:"template.name"}}),e("div",{attrs:{id:"template_content"}},[e(z,{attrs:{rows:"1",disabled:t.isUploadFile,"no-resize":t.isUploadFile,rules:t.isUploadFile?[]:t.generalRules,label:"Текст",required:""},model:{value:t.template.text,callback:function(e){t.$set(t.template,"text",e)},expression:"template.text"}}),e(I,{attrs:{label:"Загрузить файл"},model:{value:t.isUploadFile,callback:function(e){t.isUploadFile=e},expression:"isUploadFile"}}),e(w,{attrs:{"show-size":"",disabled:!t.isUploadFile,rules:t.isUploadFile?t.generalRules:[],label:"Файл",accept:"*"},model:{value:t.template.attachment,callback:function(e){t.$set(t.template,"attachment",e)},expression:"template.attachment"}})],1),e(z,{attrs:{id:"template-cb",rows:"1",label:"Клиентская база",rules:t.generalRules,hint:"Указывайте номера телефонов через запятую, без пробелов, знаков '+', 8 в начале",placeholder:"77471234567,77071234567",required:""},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault()}]},model:{value:t.template.clientsNumbers,callback:function(e){t.$set(t.template,"clientsNumbers",e)},expression:"template.clientsNumbers"}})],1)],1),e(S.Z,[e(a.Z,{attrs:{cols:"12"}},[e(s.Z,{attrs:{id:"template_submit",type:"submit",color:"primary"}},[t._v(" Отправить ")])],1)],1)],1)],1),e("vue-element-loading",{attrs:{active:t.isLoading,"background-color":"rgba(255, 255, 255, .2)",color:"blue"}})],1)},D=[],E=i(629),F=i(4402),A={data(){return{template:{name:"",text:"",attachment:null,clientsNumbers:""},isUploadFile:!1,isLoading:!1,generalRules:[t=>!!t||"*Обязательное поле"]}},computed:{...(0,E.Se)(["getUserId"]),myUserId(){return this.getUserId}},methods:{validate(){return this.$refs.form.validate()},reset(){this.$refs.form.reset()},submitForm(){if(this.validate()){this.isLoading=!0;const t=this.$route.params.userId,e={},i=new FormData;t&&i.append("childId",t),this.isUploadFile?(delete this.template.text,i.append("attachment",this.template.attachment),e.type="FILE"):(delete this.template.attachment,i.append("text",this.template.text),e.type="TEXT",e.data=this.template.text),i.append("name",this.template.name),i.append("cb",this.template.clientsNumbers),F.t.post("/template/send",i).then((e=>{this.$store.commit("setTemplate",e.data.Data),t?this.$store.commit("setActiveNestedDashboardCategory","list"):this.$store.commit("setActiveDashboardCategory","list"),this.$toast.success("Шаблон успешно создан!",{timeout:2e3}),window.templateCreate=!0,this.reset()})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})})).finally((()=>{this.isLoading=!1}))}else this.$toast.error("Обязательные поля не заполнены!",{timeout:2e3})}}},L=A,T=i(1001),X=(0,T.Z)(L,B,D,!1,null,null,null),H=X.exports},7393:function(){},4802:function(t,e,i){var s=i(5352);const a=t=>{const{touchstartX:e,touchendX:i,touchstartY:s,touchendY:a}=t,l=.5,n=16;t.offsetX=i-e,t.offsetY=a-s,Math.abs(t.offsetY)<l*Math.abs(t.offsetX)&&(t.left&&i<e-n&&t.left(t),t.right&&i>e+n&&t.right(t)),Math.abs(t.offsetX)<l*Math.abs(t.offsetY)&&(t.up&&a<s-n&&t.up(t),t.down&&a>s+n&&t.down(t))};function l(t,e){const i=t.changedTouches[0];e.touchstartX=i.clientX,e.touchstartY=i.clientY,e.start&&e.start(Object.assign(t,e))}function n(t,e){const i=t.changedTouches[0];e.touchendX=i.clientX,e.touchendY=i.clientY,e.end&&e.end(Object.assign(t,e)),a(e)}function o(t,e){const i=t.changedTouches[0];e.touchmoveX=i.clientX,e.touchmoveY=i.clientY,e.move&&e.move(Object.assign(t,e))}function r(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>l(t,e),touchend:t=>n(t,e),touchmove:t=>o(t,e)}}function h(t,e,i){const a=e.value,l=a.parent?t.parentElement:t,n=a.options||{passive:!0};if(!l)return;const o=r(e.value);l._touchHandlers=Object(l._touchHandlers),l._touchHandlers[i.context._uid]=o,(0,s.XP)(o).forEach((t=>{l.addEventListener(t,o[t],n)}))}function u(t,e,i){const a=e.value.parent?t.parentElement:t;if(!a||!a._touchHandlers)return;const l=a._touchHandlers[i.context._uid];(0,s.XP)(l).forEach((t=>{a.removeEventListener(t,l[t])})),delete a._touchHandlers[i.context._uid]}const c={inserted:h,unbind:u};e["Z"]=c},6174:function(t,e,i){var s=i(144),a=i(5352);e["Z"]=s.ZP.extend({name:"comparable",props:{valueComparator:{type:Function,default:a.vZ}}})},596:function(t,e,i){i.d(e,{Z:function(){return u}});i(7658);var s=i(573),a=i(7069),l=i(144),n=l.ZP.extend({name:"rippleable",directives:{ripple:a.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),o=i(6174),r=i(7678);function h(t){t.preventDefault()}var u=(0,r.Z)(s.Z,n,o.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=s.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:h},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:h},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}})}}]);
//# sourceMappingURL=112.a29f48d2.js.map