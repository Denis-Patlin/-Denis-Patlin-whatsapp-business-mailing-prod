"use strict";(self["webpackChunkwork_project_v3"]=self["webpackChunkwork_project_v3"]||[]).push([[721],{1149:function(t,e,s){s.d(e,{Z:function(){return h}});var i=s(7808),a=function(){var t=this,e=t._self._c;return e(i.Z,{attrs:{"prepend-icon":"fa-solid fa-magnifying-glass",placeholder:"Search..."},on:{input:t.search}})},n=[],r={props:{dataForFilter:{type:Array,default:()=>[]},searchKey:{type:String,default:""}},data(){return{filtredData:[]}},methods:{search(t){this.filtredData=this.dataForFilter.filter((e=>e[this.searchKey].includes(t))),this.$emit("onFilter",this.filtredData)}}},l=r,o=s(1001),c=(0,o.Z)(l,a,n,!1,null,null,null),h=c.exports},3179:function(t,e,s){s.r(e),s.d(e,{default:function(){return F}});var i=s(3423),a=s(5808),n=s(4525),r=s(6098),l=s(5256),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.templatesOrigin.length?t._e():e("div",{staticClass:"empty_list"},[t._v(" Список пуст ")]),e("div",{staticClass:"search-bar"},[e("BaseSearchBar",{attrs:{"data-for-filter":t.templates,"search-key":"template_name"},on:{onFilter:t.onFilterHandle}})],1),e(l.Z,{attrs:{items:t.templatesOrigin,"item-height":70,"min-height":"50vh","max-height":"100vh"},scopedSlots:t._u([{key:"default",fn:function({item:s}){return[e("div",{staticClass:"list_item"},[e("div",{staticClass:"list_item__block_info"},[e(i.Z,{attrs:{color:t.getColor(s.template_name)}},[e("div",[t._v(t._s(t.getFirstLetter(s.template_name)))])]),e("button",{staticClass:"block_info__name",on:{click:function(e){return t.openModal(s)}}},[t._v(" "+t._s(s.template_name)+" ")])],1),e("div",{staticClass:"list_item__block_buttons"},[e("BaseButton",{attrs:{color:"gray"},on:{click:function(e){return t.deleteTemplate(s)}}},[e("i",{staticClass:"fa-solid fa-trash-can red_font"})])],1)])]}}])}),e("BaseModal",{attrs:{open:t.open,title:"Детали шаблона"},on:{onModalClose:t.onCloseModalHandle}},[e("template",{slot:"content"},[e(a.Z,{attrs:{dense:""}},[e(n.Z,[e(r.V9,[t._v("ID Шаблона:")]),e(r.oZ,[t._v(t._s(t.selectedItem.template_id))])],1),e(n.Z,[e(r.V9,[t._v("ID Пользователя:")]),e(r.oZ,[t._v(t._s(t.selectedItem.user_id||"Не найдено"))])],1),e(n.Z,[e(r.V9,[t._v("Время создания")]),e(r.oZ,[t._v(t._s(t.dayjs(t.selectedItem.timestamp).format("DD.MM.YYYY hh:mm:ss")))])],1),e(n.Z,[e(r.V9,[t._v("Контент")]),"TEXT"===t.selectedItem.edna_shortcut?.content?.whatsappContent?.contentType?e("p",{key:"content-availability",staticStyle:{width:"100%"}},[t._v(' "'+t._s(t.selectedItem.edna_shortcut?.content?.whatsappContent?.text)+'" ')]):e("a",{key:"content-availability",staticClass:"content_file",attrs:{href:t.selectedItem.edna_shortcut?.content?.whatsappContent?.attachment?.url,target:"_blank"}},[t._v(" "+t._s(t.selectedItem.edna_shortcut?.content?.whatsappContent?.attachment?.url)+" ")])],1)],1)],1)],2),e("vue-element-loading",{attrs:{active:t.isLoading,"background-color":"rgba(255, 255, 255, 1)",color:"blue"}})],1)},c=[],h=s(4110),d=s(629),m=s(1149),u=s(9945),p=s(646),_=s(4402),g=s(7484),f=s.n(g),v=s(2581),C={components:{BaseModal:u.Z,BaseButton:p.Z,BaseSearchBar:m.Z},mixins:[h.Z,v.Z],data:()=>({isLoading:!1,open:!1,selectedItem:{},templatesOrigin:[]}),computed:{...(0,d.Se)(["getTemplates"]),templates(){return this.getTemplates}},watch:{templates(t){this.templatesOrigin=[...t]}},mounted(){if(!localStorage.getItem("CompleteTemplateCreateTour")){this.createTour();const t=this.$route.params.userId;t?this.addAdminCreateTemplateTour():this.addCreateTemplateTour(),this.tour.start()}},created(){this.getData()},methods:{getData(t=this.$route.params.userId){this.isLoading=!1;const e={};t&&(e.username=t),_.t.post("get/templates",e).then((t=>{const e=t.data.Data?t.data.Data:[],s=e.sort(((t,e)=>new Date(e.date)-new Date(t.date)));this.$store.commit("setTemplate",s.reverse())})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})})).finally((()=>{this.isLoading=!1}))},dayjs:f(),onCloseModalHandle(){this.selectedItem={},this.open=!1},onFilterHandle(t){this.templatesOrigin=t},openModal(t){this.selectedItem=t,this.open=!0},deleteTemplate(t){_.t["delete"](`delete/template/${t.template_id}`).then((()=>{this.$store.commit("deleteTemplate",t.template_id),this.$toast.info("Шаблон успешно удален")})).catch((t=>{this.$toast.error(t.message,{timeout:2e3})}))}}},y=C,b=s(1001),T=(0,b.Z)(y,o,c,!1,null,"5f4964d7",null),F=T.exports},5256:function(t,e,s){s.d(e,{Z:function(){return c}});var i=s(8846);function a(t,e,s){const{self:i=!1}=e.modifiers||{},a=e.value,n="object"===typeof a&&a.options||{passive:!0},r="function"===typeof a||"handleEvent"in a?a:a.handler,l=i?t:e.arg?document.querySelector(e.arg):window;l&&(l.addEventListener("scroll",r,n),t._onScroll=Object(t._onScroll),t._onScroll[s.context._uid]={handler:r,options:n,target:i?void 0:l})}function n(t,e,s){var i;if(!(null===(i=t._onScroll)||void 0===i?void 0:i[s.context._uid]))return;const{handler:a,options:n,target:r=t}=t._onScroll[s.context._uid];r.removeEventListener("scroll",a,n),delete t._onScroll[s.context._uid]}const r={inserted:a,unbind:n};var l=r,o=s(5352),c=i.Z.extend({name:"v-virtual-scroll",directives:{Scroll:l},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},data:()=>({first:0,last:0,scrollTop:0}),computed:{__bench(){return parseInt(this.bench,10)},__itemHeight(){return parseInt(this.itemHeight,10)},firstToRender(){return Math.max(0,this.first-this.__bench)},lastToRender(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted(){this.last=this.getLast(0)},methods:{getChildren(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild(t,e){e+=this.firstToRender;const s=(0,o.kb)(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:s},key:e},(0,o.z9)(this,"default",{index:e,item:t}))},getFirst(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast(t){const e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render(t){const e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:(0,o.kb)(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}})},2581:function(t,e){e["Z"]={methods:{getColor(t){const e=["#F46A5F","#FC8256","#FFC33D","#49BEB7","#4C96D7","#8555D7","#FF7DCC","#D4C5F9","#4992E6","#FF6B8A","#01A9DB","#B6FCD5"];let s=0;for(let a=0;a<t.length;a++)s=t.charCodeAt(a)+((s<<5)-s);const i=Math.abs(s)%e.length;return e[i]},getFirstLetter(t){return t&&t.length>0?t.charAt(0):""}}}}}]);
//# sourceMappingURL=721.1cd8cb5c.js.map